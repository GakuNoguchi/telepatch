# ゾーン駆動設計 - 環境応答

> 📖 **概要と他の設計論との関係**: この設計論の全体像については
> [[What] humanityの設計論 - 3つの駆動設計]([What] humanityの設計論 - 3つの駆動設計.md)の第3章を参照してください。
> 本ドキュメントは詳細版です。

---

# ゾーン駆動設計論 - 場所がソフトウェアを駆動する

**目的**: ゾーンとは何か、その設計思想と実装方法を明確に記述する

---

## プロローグ：デジタル情報はどこにあるのか

私たちは、デジタル情報がどこにあるか答えられない。

「あのファイル、どこだっけ？」
「メモはどのアプリに入れたっけ？」
「タスクは…Notionだったか、Todoistだったか？」

**デジタル情報には場所がない。**

一方、現実世界の情報には場所がある。

「あの棚にあったな」
「玄関に段ボールが置いてある」
「リビングのテーブルにメモが置いてある」

私たちは、物理世界では「場所」で情報を管理している。しかしデジタル情報は、スマホやPCの「中」にあり、場所とは切り離されている。

**ゾーン駆動設計は、この分離を解消する。**

デジタル情報を物理空間に紐づけ、「その場所に行くと情報が見える」状態を作る。これが、ゾーンという概念の出発点である。

---

## 第1章：ゾーンとは何か

### 1.1 定義：場所に紐づくデジタル情報の集合体

**ゾーン = 物理空間（玄関、リビング、部屋など）に紐づくデジタル情報の集合体**

ゾーンには、2つの要素が含まれる：

1. **その場所に残されたメッセージ/クエスト**
   - 「段ボールを2階に運んでほしい」
   - 「今日の買い物リスト」
   - 「この部屋でやるべきタスク」

2. **そのゾーンの中にあるモノが持つアフォーダンス（能力）**
   - 冷蔵庫：「保存できる」「温度を計測できる」
   - プリンター：「印刷できる」
   - 電子レンジ：「加熱できる」
   - 人間：「料理できる」「判断できる」

**重要なのは、ハードウェア・ソフトウェア・人間を区別しないことである。**

すべてが「そのゾーンに存在するノード」として、自分の能力を提示する。

### 1.2 ゾーンに入ると何が起きるか

**ゾーンに入る = その場所の「やるべきこと（クエスト）」と「できること（アフォーダンス）」の両方が見える状態になる**

例：玄関というゾーンに入ったとき

- スマートフォンのライブアクティビティに「段ボールを2階に運んでほしい」というメッセージが表示される
- そのゾーンにある物理的なモノ（冷蔵庫、プリンター、棚など）のアフォーダンスが「見える」状態になる
- 人がいれば、その人の能力（「料理できる」「判断できる」）も見える

**ゾーンを離れると、別のゾーンの情報に切り替わる。**

リビングに移動すれば、リビングのクエストとアフォーダンスが表示される。常に「今いる場所」の情報だけが見える。

### 1.3 従来のソフトウェアとの違い

|観点|従来のソフトウェア|ゾーン駆動設計|
|---|---|---|
|**情報の場所**|スマホ/PCの中|物理空間に紐づく|
|**情報の取得**|アプリを開いて探す|その場所に行くと自動で見える|
|**情報の管理**|アプリごとに分散|場所ごとに統合|
|**ハード・ソフトの区別**|明確に区別される|区別されない（すべてノード）|

---

## 第2章：なぜゾーンなのか

### 2.1 問題：デジタル情報は探しにくい

現在のデジタル情報管理には、根本的な問題がある。

**問題1：情報が散らばっている**
- タスクはTodoistに
- メモはNotionに
- 写真はGoogle Photosに
- メッセージはSlackに

どこに何があるか覚えておく必要がある。アプリを開いて、探して、見つける。認知負荷が高い。

**問題2：場所との結びつきがない**
- 「玄関で思い出したいこと」を玄関で思い出せない
- 「キッチンで必要な情報」をキッチンで見られない
- 物理世界で行動しているのに、情報はデジタル空間に取り残されている

### 2.2 解決：場所に情報を紐づける

人間は、物理空間で情報を記憶する能力が高い。

- 「あの棚にあった」
- 「玄関に置いてあった」
- 「リビングのテーブルの上」

**物理的な場所は、最も強力な記憶の手がかりである。**

ゾーン駆動設計は、この人間の自然な認知能力を活用する。デジタル情報を物理空間に紐づけることで、「その場所に行くと思い出す」状態を作る。

### 2.3 ゾーンは「状態」を持つ

ゾーンは、単なる場所の名前ではない。**状態を持つ動的な存在**である。

例：玄関というゾーン

- 昨日、誰かが「段ボールを2階に運んでほしい」というメッセージを残した
- 今日、別の人が玄関に入ると、そのメッセージを受け取る
- メッセージを受け取った人が実行すると、ゾーンの状態が更新される

**ゾーンは、時間を超えてメッセージを届ける。**

昨日の誰かが、明日の私に向けて情報を残せる。それがゾーンに紐づいて保存される。

---

## 第3章：ゾーンとアフォーダンスの関係

### 3.1 アフォーダンス：「できること」の提示

生物学的モジュール設計論で述べたように、各ノード（ハードウェア・ソフトウェア・人間）は、自分の能力を「動詞」として記述する。

例：
- 冷蔵庫：「保存できる」「温度を計測できる」
- プリンター：「印刷できる」
- 電子レンジ：「加熱できる」
- 人間：「料理できる」「判断できる」

このアフォーダンスは、**ゾーンに入ったときに発現する。**

### 3.2 FF14のメタファー：認知者が通った時だけ発現

ファイナルファンタジー14（FF14）には、重要な設計思想がある。

従来のゲーム設計では、花のオブジェクトは常に揺れていた。しかしこれは処理負荷が高く、ゲームが重くなった。

FF14は発想を転換した：
- **ユーザー（認知者）が近づいたときだけ、花が揺れる**
- ユーザーが離れると、花は止まる

花自体に「私、揺れることができますよ」という能力（アフォーダンス）が記述されている。しかし、その能力は**ユーザーが近づいたときだけ発現する。**

**ゾーン駆動設計も同じ原理である。**

- 冷蔵庫は常にアフォーダンスを持っている
- しかし、そのアフォーダンスが「見える」「使える」状態になるのは、**人がそのゾーンに入ったとき**

### 3.3 ゾーンがないと、アフォーダンスは意味を持たない

アフォーダンスだけでは不十分である。

世界中のすべてのプリンター、すべての冷蔵庫、すべての電子レンジのアフォーダンスがリストアップされていても、それだけでは使えない。

**「今ここで使えるもの」が分かる必要がある。**

ゾーンという境界があるから、「今この場所にあるもの」が特定できる。ゾーンに入ることで、そのゾーンに存在するノードのアフォーダンスだけが「見える」状態になる。

**ゾーンは、アフォーダンスを空間的にフィルタリングする。**

---

## 第4章：ゾーンの実装

### 4.1 基本アーキテクチ���

ゾーンを実装するには、3つの要素が必要である。

**要素1：ゾーンの境界を検知する仕組み**
- BLE（Bluetooth Low Energy）ビーコン
- UWB（Ultra-Wideband）
- GPS / Wi-Fi位置情報
- NFCタグ

**要素2：ゾーンに紐づく情報を記述するファイル（ゾーンYAML）**
- そのゾーンに残されたメッセージ/クエスト
- そのゾーンに存在するノードのアフォーダンス
- ゾーンの状態（誰がいつ入ったか、何が実行されたか）

**要素3：ゾーン情報をユーザーに提示するインターフェース**
- iOSのライブアクティビティ
- Androidのウィジェット
- スマートウォッチの通知

### 4.2 ゾーンYAMLの設計

ゾーンの情報は、YAMLまたはJSONで記述される。

```yaml
zone_id: "entrance_01"
zone_name: "玄関"

# このゾーンに残されたメッセージ/クエスト
quests:
  - id: "quest_001"
    message: "段ボールを2階に運んでください"
    created_by: "tanaka"
    created_at: "2025-10-06T14:30:00Z"
    status: "active"

  - id: "quest_002"
    message: "明日の買い物リスト: 牛乳、卵、パン"
    created_by: "suzuki"
    created_at: "2025-10-06T18:00:00Z"
    status: "active"

# このゾーンに存在するノードのアフォーダンス
nodes:
  - node_id: "refrigerator_01"
    type: "hardware"
    capabilities:
      - action: "store"
        description: "食品を保存できる"
      - action: "measure_temperature"
        description: "温度を計測できる"

  - node_id: "printer_01"
    type: "hardware"
    capabilities:
      - action: "print"
        parameters:
          - name: "document"
            type: "file"
          - name: "color"
            type: "boolean"

  - node_id: "human_tanaka"
    type: "human"
    capabilities:
      - action: "cook"
        skills: ["curry", "pasta"]
      - action: "judge"
        domains: ["business", "technology"]
```

**重要なポイント：**
- ハードウェア・ソフトウェア・人間を区別しない（すべて`nodes`に記述）
- 各ノードは「できること（action）」を動詞で記述
- クエストは時間を超えて保存される

### 4.3 ゾーン検知の実装

**方法1：BLEビーコンによる検知**

各ゾーン（玄関、リビング、キッチンなど）にBLEビーコンを設置。スマートフォンがビーコンの電波を受信すると、「どのゾーンに入ったか」を判定。

```javascript
// 疑似コード
beaconDetector.onEnterZone((zoneId) => {
  const zoneYaml = fetchZoneYaml(zoneId);
  displayLiveActivity(zoneYaml.quests, zoneYaml.nodes);
});

beaconDetector.onExitZone((zoneId) => {
  hideLiveActivity(zoneId);
});
```

**方法2：NFCタグによる明示的な検知**

物理的なオブジェクト（段ボール、冷蔵庫、ドアなど）にNFCタグを貼り付け。スマートフォンをかざすと、そのオブジェクトが属するゾーンの情報を取得。

```yaml
# NFCタグに記録される情報
nfc_id: "nfc_entrance_001"
zone_id: "entrance_01"
zone_yaml_url: "https://example.com/zones/entrance_01.yaml"
```

**方法3：位置情報による自動検知**

GPS/Wi-Fi/UWBを組み合わせて、屋内位置を推定。事前に定義されたゾーンの境界と照合し、自動でゾーンを切り替え。

### 4.4 ライブアクティビティへの表示

iOSのライブアクティビティは、ロック画面に常に表示されるリアルタイム更新エリア。

**ゾーン駆動設計では、ライブアクティビティに以下を表示する：**

1. **現在のゾーン名**
   - 「玄関」「リビング」「キッチン」

2. **このゾーンのクエスト**
   - 「段ボールを2階に運んでください」
   - 「明日の買い物リスト: 牛乳、卵、パン」

3. **このゾーンで使えるノード（オプション）**
   - 「冷蔵庫（保存、温度計測）」
   - 「プリンター（印刷）」

**ユーザーは、アプリを開かなくても、常に「今ここでやるべきこと」と「今ここで使えるもの」が見える。**

### 4.5 オフライン動作の重要性

ゾーンは、ネットワーク接続を前提としない。

- NFCタグにゾーンYAMLへのポインタを記録
- ローカルLLMでアフォーダンスを解釈
- オフラインでも、ゾーンに入った瞬間に情報が見える

これは、生物学的な原理に対応する。細胞は、中央サーバーに問い合わせることなく、局所的な情報だけで接続を形成する。

---

## 第5章：ゾーンとクエストの関係

### 5.1 クエストはゾーンで発動する

タスク型からクエスト型への文明転換で述べたように、クエストは「探索と成長」を伴う活動である。

**クエストは、ゾーンに入ったときに発動する。**

例：玄関というゾーンに入ったとき
- 「段ボールを2階に運んでください」というクエストが発動
- ライブアクティビティに表示される
- ユーザーは「やろう」と思う（義務ではなく、引力）

### 5.2 時間を超えるメッセージ

ゾーンの最も重要な特性は、**時間を超えてメッセージを届ける**ことである。

- 昨日、田中さんが「明日、段ボールを2階に運んでほしい」と思った
- その思いを、玄関というゾーンに「クエスト」として残した
- 今日、鈴木さんが玄関に入ると、クエストが発動
- 鈴木さんは「やっておこう」と思う

**カレンダーやTodoリストとは異なる。**

カレンダーは「9時に会議」という時間ベースの拘束。Todoリストは「いつかやるべきこと」のリスト。

ゾーンは、**場所に入った瞬間に、その場所で必要なことが見える。**

### 5.3 全てのことはメッセージ

荒井由実（ユーミン）の「優しさに包まれたなら」に、重要な洞察がある。

> 目に映る全てのことはメッセージ

星も、カーテンからの木洩れ陽も、メッセージを送っている。私たちは受け取っているのに、気づいていなかった。

**ゾーン駆動設計は、このメッセージを明示化する。**

- 玄関に置かれた段ボール → 「運んでほしい」というメッセージ
- キッチンの食材 → 「料理してほしい」というメッセージ
- リビングの本 → 「読んでほしい」というメッセージ

物理世界のオブジェクトは、常にメッセージを発している。ゾーンは、そのメッセージをデジタル情報として明示化し、適切なタイミング（その場所に入ったとき）で届ける。

---

## 第6章：ゾーンとMCPの関係

### 6.1 四次元ポケットとしてのゾーン

四次元ポケットとMCPのドキュメントで述べたように、MCPは「モジュールを動的に取得するインターフェース」である。

**ゾーンは、MCPが動作する「場」である。**

- ユーザーがゾーンに入る
- そのゾーンのYAMLが読み込まれる
- LLMが、ゾーン内のノードのアフォーダンスを解釈
- MCP経由で、適切なモジュール/APIを動的に取得
- クエストを実行

ドラえもんが四次元ポケットに「手を突っ込む」とき、実際には**その場の状況（ゾーン）に応じて、必要な道具（モジュール）を動的に取得している。**

### 6.2 ゾーンがなければ、MCPは機能しない

MCPは、アフォーダンスを伝達できるが、「どのアフォーダンスが今必要か」は判断しない。

**ゾーンがあることで、MCPは文脈を得る。**

- ���在のゾーン：玄関
- ゾーンの状態：段ボールがある、冷蔵庫がある
- クエスト：「段ボールを2階に運んでほしい」

この文脈があるから、LLMは「段ボールを運ぶ」という動詞に関連するモジュールをMCP経由で取得できる。

---

## 第7章：ゾーンの未来

### 7.1 ゾーンは動的に生成される

現在の実装では、ゾーンは事前に定義されている（玄関、リビング、キッチンなど）。

しかし、将来的には**ゾーンは動的に生成される。**

例：サマーウォーズのステージ生成

映画『サマーウォーズ』では、仮想世界OZの「カジノステージ」は事前に設計されていなかった。状況に応じて、その場で生成された。

**ゾーンも同様に、状況に応じて生成される。**

- 3人が集まったら、「会議ゾーン」が生成される
- 料理を始めたら、「調理ゾーン」が生成される
- 移動中は、「移動ゾーン」が生成される

ゾーンは、物理的な部屋の境界に縛られない。**活動に応じて、動的に生成・消滅する。**

### 7.2 ゾーン間の連携

複数のゾーンが連携する。

例：キッチンゾーンとリビングゾーンの連携

- キッチンで料理を始める → キッチンゾーンで「調理中」状態
- リビングにいる人に「もうすぐご飯ができます」というメッセージが送られる
- リビングゾーンに「テーブルの準備」というクエストが発動

ゾーンは独立しているが、相互に影響を与え合う。

### 7.3 ゾーンの学習と進化

ゾーンは、使われるほどに賢くなる。

- 毎朝7時に玄関に入ると、「今日の予定」が表示される
- 金曜日の夜にリビングに入ると、「週末の計画」が表示される
- 疲れているときにキッチンに入ると、「簡単な料理」が提案される

LLMは、ユーザーの行動パターンを学習し、ゾーンの状態を最適化する。

---

## エピローグ：ゾーンが駆動する世界

### ゾーンは場所にソフトウェアを与える

従来のソフトウェアは、場所を持たなかった。情報はデジタル空間に浮遊し、ユーザーは「探す」必要があった。

**ゾーン駆動設計は、場所にソフトウェアを与える。**

- 玄関には玄関のソフトウェアがある
- リビングにはリビングのソフトウェアがある
- キッチンにはキッチンのソフトウェアがある

場所ごとに、適切な情報、適切なクエスト、適切なアフォーダンスが存在する。

### ゾーンは人間の自然な認知を拡張する

人間は、物理空間で思考する生き物である。「あの場所でやるべきこと」を、場所と結びつけて記憶する。

ゾーンは、この人間の自然な認知能力を拡張する。デジタル情報を物理空間に紐づけることで、「思い出す」認知負荷を減らす。

**ゾーンがあるから、私たちは「探す」のではなく「気づく」ことができる。**

### 未解決の問題

以下の問題は、現時点で明確な答えを持たない。

1. **ゾーンの境界定義**
   - ゾーンの範囲をどう決めるか
   - 重なり合うゾーンの優先順位は

2. **干渉の制御**
   - 複数のゾーンが矛盾するクエストを出したらどうするか
   - ユーザーの選択権とシステムの提案のバランス

3. **メッセージの寿命**
   - ゾーンに残されたメッセージはいつまで有効か
   - 古くなったメッセージの削除基準

4. **プライバシーと記録**
   - ゾーン内での行動をどこまで記録するか
   - 誰がアクセスできるか

これらの問題は、実装と検証を通じて明らかになるだろう。

---

## 関連概念

この設計思想は、以下の概念と統合される：

**タスク型からクエスト型への文明転換**
- ゾーンは、クエストが発生する「場」である

**四次元ポケットとMCP**
- ゾーンは、MCPが動作する「文脈」を提供する

**生物学的モジュール設計論**
- ゾーンに入ることで、アフォーダンスが発現する

これらは別々の概念ではなく、生成AIネイティブ時代の統合的な設計思想である。

---

*作成日：2025-10-07*
*ゾーンは、場所がソフトウェアを駆動する未来への第一歩である。*
